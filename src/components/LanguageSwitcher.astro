---
/**
 * Language Switcher Component
 * ===========================
 * Displays available language options with links to alternate versions.
 *
 * - Current locale: highlighted text
 * - Available alternates: clickable links
 * - Missing translations: struck-through text
 */

import { locales, localeLabels, type Locale } from "@/i18n";

interface Props {
  locale: Locale;
  alternates?: Record<string, string>;
}

const { locale, alternates = {} } = Astro.props;

const options = locales.map((loc) => ({
  code: loc,
  label: localeLabels[loc],
  href: alternates[loc] || null,
  isCurrent: loc === locale,
}));
---

<div class="lang">
  {
    options.map((opt, i) => (
      <>
        {i > 0 && <span class="sep">/</span>}
        {opt.isCurrent ? (
          <span class="current">{opt.label}</span>
        ) : opt.href ? (
          <a href={opt.href}>{opt.label}</a>
        ) : (
          <span class="na">{opt.label}</span>
        )}
      </>
    ))
  }
</div>
