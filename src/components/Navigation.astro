---
import { getRelativeLocaleUrl } from "astro:i18n";
import { t, type Locale } from "@/i18n";

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;
const { nav } = t(locale);

// Normalize path for comparison (remove trailing slash, handle root)
function normalizePath(path: string): string {
  if (path === "/") return "/";
  return path.replace(/\/$/, "");
}

const currentPath = normalizePath(Astro.url.pathname);
---

<nav class="nav">
  {
    nav.links.map((link) => {
      const href = getRelativeLocaleUrl(locale, link.path);
      const isActive = currentPath === normalizePath(href);
      return <a href={href} class:list={[{ active: isActive }]}>{link.label}</a>;
    })
  }
</nav>
